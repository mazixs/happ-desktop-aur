# –ò—Ç–æ–≥–æ–≤—ã–π –æ—Ç—á–µ—Ç –ø—Ä–æ–µ–∫—Ç–∞ Happ Desktop AUR

## ‚úÖ –ó–∞–¥–∞—á–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞

**–¶–µ–ª—å**: –†–∞—Å–ø–∞–∫–æ–≤–∞—Ç—å AppImage –∏ —Å–æ–∑–¥–∞—Ç—å –Ω–∞—Ç–∏–≤–Ω—ã–π AUR –ø–∞–∫–µ—Ç —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π `cap_net_admin` –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è TUN –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤.

**–°—Ç–∞—Ç—É—Å**: ‚úÖ **–ó–ê–í–ï–†–®–ï–ù–û**

---

## üìã –ü—Ä–æ–¥–µ–ª–∞–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞

### 1. –ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –∏ –∞–Ω–∞–ª–∏–∑ ‚úÖ

- –†–∞—Å–ø–∞–∫–æ–≤–∞–Ω `Happ.linux.x86.AppImage` (76 MB)
- –ò–∑—É—á–µ–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:
  - **GUI**: Qt5 –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (`Happ`, 7.4 MB)
  - **VPN —è–¥—Ä–∞**: `sing-box` (44 MB) –∏ `xray` (34 MB)
  - **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ**: antifilter, –±–∏–±–ª–∏–æ—Ç–µ–∫–∏, –ø–ª–∞–≥–∏–Ω—ã, QML –º–æ–¥—É–ª–∏
- –û–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –∫—Ä–∏—Ç–∏—á–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã, —Ç—Ä–µ–±—É—é—â–∏–µ `cap_net_admin`

### 2. –°–æ–∑–¥–∞–Ω–∏–µ PKGBUILD ‚úÖ

**–§–∞–π–ª**: `PKGBUILD`

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª**:
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–∞—Å–ø–∞–∫–æ–≤–∫–∞ AppImage
- –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤ `/opt/happ/` (–Ω–∞—Ç–∏–≤–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞)
- –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ (–±–∏–Ω–∞—Ä–Ω–∏–∫–∏, –±–∏–±–ª–∏–æ—Ç–µ–∫–∏, —Ä–µ—Å—É—Ä—Å—ã)
- –°–æ–∑–¥–∞–Ω–∏–µ wrapper —Å–∫—Ä–∏–ø—Ç–∞ `/usr/bin/happ` —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è
- –£—Å—Ç–∞–Ω–æ–≤–∫–∞ desktop —Ñ–∞–π–ª–∞ –∏ –∏–∫–æ–Ω–∫–∏
- –°–æ–∑–¥–∞–Ω–∏–µ —Å–∏–º–ª–∏–Ω–∫–æ–≤ –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏

**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**:
- `qt5-base`, `qt5-svg`, `qt5-declarative`
- `openssl`, `libcap`

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ capabilities ‚úÖ

**–§–∞–π–ª**: `happ-desktop.install`

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª post_install**:
```bash
setcap 'cap_net_admin+ep' /opt/happ/tun/sing-box
setcap 'cap_net_admin+ep' /opt/happ/core/xray
```

**–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**:
- ‚úÖ –¢–æ–ª—å–∫–æ VPN —è–¥—Ä–∞ –ø–æ–ª—É—á–∞—é—Ç –ø—Ä–∏–≤–∏–ª–µ–≥–∏–∏
- ‚úÖ GUI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –ø–æ–≤—ã—à–µ–Ω–Ω—ã—Ö –ø—Ä–∞–≤
- ‚úÖ –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ capability (—Ç–æ–ª—å–∫–æ —Å–µ—Ç–µ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏)
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ capabilities –ø—Ä–∏ –¥–µ–∏–Ω—Å—Ç–∞–ª–ª—è—Ü–∏–∏

### 4. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ ‚úÖ

**–§–∞–π–ª**: `test-capabilities.sh`

**–ü—Ä–æ–≤–µ—Ä—è–µ—Ç**:
- –£—Å—Ç–∞–Ω–æ–≤–∫—É –ø–∞–∫–µ—Ç–∞ –∏ –≤–µ—Ä—Å–∏—é
- –ù–∞–ª–∏—á–∏–µ –≤—Å–µ—Ö –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
- –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ capabilities –Ω–∞ sing-box –∏ xray
- –ó–∞–≥—Ä—É–∑–∫—É TUN –º–æ–¥—É–ª—è —è–¥—Ä–∞
- –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Qt5

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**:
```bash
./test-capabilities.sh
```

### 5. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è ‚úÖ

–°–æ–∑–¥–∞–Ω–æ **6 –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤**:

#### a) README.md (6 KB)
- –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è
- –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ (–ª–æ–∫–∞–ª—å–Ω–æ –∏ —á–µ—Ä–µ–∑ AUR)
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã
- –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏
- –†–µ—à–µ–Ω–∏–µ —Ç–∏–ø–æ–≤—ã—Ö –ø—Ä–æ–±–ª–µ–º
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏ —É–¥–∞–ª–µ–Ω–∏–µ

#### b) BUILD.md (6.3 KB)
- –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Å–±–æ—Ä–∫–µ
- –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- –ü–æ—à–∞–≥–æ–≤—ã–π –ø—Ä–æ—Ü–µ—Å—Å
- –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º –ø—Ä–∏ —Å–±–æ—Ä–∫–µ
- –ü–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤–µ—Ä—Å–∏–∏
- –ü—É–±–ª–∏–∫–∞—Ü–∏—è –≤ AUR
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ chroot
- –û—Ç–ª–∞–¥–∫–∞ –∏ –ª–æ–≥–∏

#### c) CAPABILITIES.md (11 KB)
- –î–µ—Ç–∞–ª—å–Ω–æ–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å AppImage
- –ß—Ç–æ —Ç–∞–∫–æ–µ `cap_net_admin` –∏ –∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç
- –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–º–∏ —Ä–µ—à–µ–Ω–∏—è–º–∏ (SUID, sudo, systemd)
- –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ —Ñ–æ—Ä–º–∞—Ç capabilities
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏ –æ—Ç–ª–∞–¥–∫–∞
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ TUN –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤
- –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ —Ç–∏–ø–æ–≤—ã—Ö –ø—Ä–æ–±–ª–µ–º
- –°—Å—ã–ª–∫–∏ –Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é Linux

#### d) SOLUTION.md (5.5 KB)
- –ö—Ä–∞—Ç–∫–æ–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ —Ä–µ—à–µ–Ω–∏–µ
- –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
- –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
- –û–±—ä—è—Å–Ω–µ–Ω–∏–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- –°—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –º–µ—Ç–æ–¥–æ–≤
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã TUN
- –ò—Ç–æ–≥–æ–≤—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã "–¥–æ/–ø–æ—Å–ª–µ"

#### e) QUICKSTART.md (2 KB)
- –ú–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω–∞—è —à–ø–∞—Ä–≥–∞–ª–∫–∞
- 3 –∫–æ–º–∞–Ω–¥—ã –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏
- –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
- –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
- –†–µ—à–µ–Ω–∏–µ —Ç–∏–ø–æ–≤—ã—Ö –ø—Ä–æ–±–ª–µ–º –æ–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–æ–π

#### f) PROJECT_SUMMARY.md (—ç—Ç–æ—Ç —Ñ–∞–π–ª)
- –ò—Ç–æ–≥–æ–≤—ã–π –æ—Ç—á–µ—Ç –æ —Ä–∞–±–æ—Ç–µ
- –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
- –°—Ç–∞—Ç—É—Å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

### 6. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã ‚úÖ

#### .gitignore
–ò—Å–∫–ª—é—á–∞–µ—Ç –∏–∑ git:
- –í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã —Å–±–æ—Ä–∫–∏ (`src/`, `pkg/`, `*.pkg.tar.zst`)
- AppImage —Ñ–∞–π–ª—ã (`*.AppImage`)
- –†–∞—Å–ø–∞–∫–æ–≤–∞–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç (`squashfs-root/`)

#### .SRCINFO
- –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –¥–ª—è AUR
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω—ã –∏–∑ PKGBUILD
- –°–æ–¥–µ—Ä–∂–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è—Ö –∏ –≤–µ—Ä—Å–∏–∏

---

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

### –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

| –§–∞–π–ª | –†–∞–∑–º–µ—Ä | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|------|--------|------------|
| `PKGBUILD` | 3.5 KB | –°–±–æ—Ä–æ—á–Ω—ã–π —Å–∫—Ä–∏–ø—Ç |
| `happ-desktop.install` | 2 KB | Post-install —Å–∫—Ä–∏–ø—Ç |
| `test-capabilities.sh` | 3.9 KB | –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ |
| `README.md` | 6 KB | –û—Å–Ω–æ–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è |
| `BUILD.md` | 6.3 KB | –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Å–±–æ—Ä–∫–µ |
| `CAPABILITIES.md` | 11 KB | –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ capabilities |
| `SOLUTION.md` | 5.5 KB | –¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ —Ä–µ—à–µ–Ω–∏–µ |
| `QUICKSTART.md` | 2 KB | –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç |
| `.gitignore` | 150 B | –ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º—ã–µ —Ñ–∞–π–ª—ã |
| `.SRCINFO` | 555 B | –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ AUR |
| **–ò–¢–û–ì–û** | **~41 KB** | **10 —Ñ–∞–π–ª–æ–≤** |

### –°—Ç—Ä–æ–∫–∏ –∫–æ–¥–∞

- **PKGBUILD**: ~100 —Å—Ç—Ä–æ–∫ bash
- **install —Å–∫—Ä–∏–ø—Ç**: ~50 —Å—Ç—Ä–æ–∫ bash
- **test —Å–∫—Ä–∏–ø—Ç**: ~140 —Å—Ç—Ä–æ–∫ bash
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: ~900 —Å—Ç—Ä–æ–∫ markdown
- **–ò–¢–û–ì–û**: ~1200 —Å—Ç—Ä–æ–∫

---

## üéØ –î–æ—Å—Ç–∏–≥–Ω—É—Ç—ã–µ —Ü–µ–ª–∏

### ‚úÖ –û—Å–Ω–æ–≤–Ω—ã–µ

1. **–†–∞—Å–ø–∞–∫–æ–≤–∫–∞ AppImage** - –∏–∑–≤–ª–µ—á–µ–Ω–∞ –ø–æ–ª–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
2. **–ù–∞—Ç–∏–≤–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞** - —Å–æ–∑–¥–∞–Ω PKGBUILD –¥–ª—è /opt/happ/
3. **Capabilities** - –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã cap_net_admin –¥–ª—è sing-box –∏ xray
4. **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è** - post_install –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç –≤—Å—ë
5. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** - —Å–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

### ‚úÖ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ

1. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** - 6 –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –Ω–∞ 900+ —Å—Ç—Ä–æ–∫
2. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –ø—Ä–∏–≤–∏–ª–µ–≥–∏–∏, —Ç–æ–ª—å–∫–æ –Ω–∞ VPN —è–¥—Ä–∞
3. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** - desktop —Ñ–∞–π–ª, –∏–∫–æ–Ω–∫–∞, wrapper —Å–∫—Ä–∏–ø—Ç
4. **Git** - –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π .gitignore, –≥–æ—Ç–æ–≤–æ –∫ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏
5. **AUR –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å** - .SRCINFO —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω

---

## üîê –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã cap_net_admin

### –ü—Ä–æ–±–ª–µ–º–∞
```
‚ùå AppImage ‚Üí FUSE mount ‚Üí capabilities –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç ‚Üí TUN –Ω–µ —Å–æ–∑–¥–∞—ë—Ç—Å—è
```

### –†–µ—à–µ–Ω–∏–µ
```
‚úÖ –ù–∞—Ç–∏–≤–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ ‚Üí —Ñ–∞–π–ª—ã –≤ /opt ‚Üí setcap ‚Üí TUN —Ä–∞–±–æ—Ç–∞–µ—Ç
```

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | Path | Capability | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|-----------|------|------------|------------|
| GUI | `/opt/happ/Happ` | –Ω–µ—Ç | Qt5 –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å |
| sing-box | `/opt/happ/tun/sing-box` | **cap_net_admin=ep** | –°–æ–∑–¥–∞–Ω–∏–µ TUN |
| xray | `/opt/happ/core/xray` | **cap_net_admin=ep** | –°–æ–∑–¥–∞–Ω–∏–µ TUN |
| antifilter | `/opt/happ/antifilter/antifilter` | –Ω–µ—Ç | –ê–Ω—Ç–∏—Ñ–∏–ª—å—Ç—Ä |

---

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ë—ã—Å—Ç—Ä–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞
```bash
git clone https://github.com/mazixs/happ-desktop-aur.git
cd happ-desktop-aur
# –ü–æ–º–µ—Å—Ç–∏—Ç—å Happ.linux.x86.AppImage –≤ —ç—Ç—É –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
makepkg -si
./test-capabilities.sh
happ
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ TUN
```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏ –ø–æ–¥–∫–ª—é—á–∏—Ç—å VPN
happ

# –í –¥—Ä—É–≥–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã
ip link show | grep tun
# –î–æ–ª–∂–µ–Ω –ø–æ—è–≤–∏—Ç—å—Å—è tun0 –∏–ª–∏ –ø–æ–¥–æ–±–Ω—ã–π
```

---

## üì¶ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–≥–æ –ø–∞–∫–µ—Ç–∞

```
/opt/happ/
‚îú‚îÄ‚îÄ Happ                          # GUI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (Qt5, 7.4 MB)
‚îú‚îÄ‚îÄ bin/                          # –°–∏–º–ª–∏–Ω–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ Happ -> /opt/happ/Happ
‚îÇ   ‚îú‚îÄ‚îÄ sing-box -> ../tun/sing-box
‚îÇ   ‚îú‚îÄ‚îÄ xray -> ../core/xray
‚îÇ   ‚îî‚îÄ‚îÄ antifilter -> ../antifilter/antifilter
‚îú‚îÄ‚îÄ tun/
‚îÇ   ‚îú‚îÄ‚îÄ sing-box                 # ‚Üê cap_net_admin+ep (44 MB)
‚îÇ   ‚îî‚îÄ‚îÄ LICENSE
‚îú‚îÄ‚îÄ core/
‚îÇ   ‚îú‚îÄ‚îÄ xray                     # ‚Üê cap_net_admin+ep (34 MB)
‚îÇ   ‚îú‚îÄ‚îÄ geoip.dat               # –ì–µ–æ–¥–∞–Ω–Ω—ã–µ (20 MB)
‚îÇ   ‚îú‚îÄ‚îÄ geosite.dat             # –ì–µ–æ–¥–∞–Ω–Ω—ã–µ (10 MB)
‚îÇ   ‚îú‚îÄ‚îÄ LICENSE
‚îÇ   ‚îî‚îÄ‚îÄ README.md
‚îú‚îÄ‚îÄ antifilter/
‚îÇ   ‚îî‚îÄ‚îÄ antifilter              # –ê–Ω—Ç–∏—Ñ–∏–ª—å—Ç—Ä (150 KB)
‚îú‚îÄ‚îÄ lib/                         # Qt5 –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ (~30 MB)
‚îú‚îÄ‚îÄ plugins/                     # Qt5 –ø–ª–∞–≥–∏–Ω—ã
‚îú‚îÄ‚îÄ qml/                         # QML –º–æ–¥—É–ª–∏
‚îú‚îÄ‚îÄ translations/                # –ü–µ—Ä–µ–≤–æ–¥—ã
‚îî‚îÄ‚îÄ qt.conf

/usr/bin/happ                    # Wrapper —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è
/usr/share/applications/happ.desktop
/usr/share/pixmaps/happ.png
```

**–û–±—â–∏–π —Ä–∞–∑–º–µ—Ä**: ~150 MB

---

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

### –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ capabilities

```bash
$ getcap -r /opt/happ/
/opt/happ/tun/sing-box cap_net_admin=ep
/opt/happ/core/xray cap_net_admin=ep
```

**–¢–æ–ª—å–∫–æ 2 —Ñ–∞–π–ª–∞** –∏–∑ ~1160 —Ñ–∞–π–ª–æ–≤ –ø–∞–∫–µ—Ç–∞ –∏–º–µ—é—Ç –ø–æ–≤—ã—à–µ–Ω–Ω—ã–µ –ø—Ä–∞–≤–∞!

### –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

| –ú–µ—Ç–æ–¥ | GUI | sing-box | xray | antifilter | –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å |
|-------|-----|----------|------|------------|--------------|
| **–ù–∞—à–µ —Ä–µ—à–µ–Ω–∏–µ** | user | cap_net_admin | cap_net_admin | user | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê |
| SUID root | user | **root** | **root** | user | ‚≠ê |
| sudo –≤—Å–µ–≥–¥–∞ | **sudo** | **sudo** | **sudo** | **sudo** | ‚≠ê‚≠ê |
| systemd+root | user | **root** | **root** | user | ‚≠ê‚≠ê |

---

## üìö –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

–î–ª—è —Ä–∞–∑–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:

- üöÄ **–•–æ—á—É –±—ã—Å—Ç—Ä–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å** ‚Üí `QUICKSTART.md`
- üìñ **–ù—É–∂–Ω–∞ –ø–æ–ª–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è** ‚Üí `README.md`
- üîß **–ü—Ä–æ–±–ª–µ–º—ã –ø—Ä–∏ —Å–±–æ—Ä–∫–µ** ‚Üí `BUILD.md`
- üîí **–í–æ–ø—Ä–æ—Å—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏** ‚Üí `CAPABILITIES.md`
- üí° **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ —Ä–µ—à–µ–Ω–∏–µ** ‚Üí `SOLUTION.md`
- üìä **–û–±—â–∏–π –æ–±–∑–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞** ‚Üí `PROJECT_SUMMARY.md` (—ç—Ç–æ—Ç —Ñ–∞–π–ª)

---

## ‚ú® –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### 1. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –ø—Ä–∏–≤–∏–ª–µ–≥–∏–∏ (principle of least privilege)
- –¢–æ–ª—å–∫–æ VPN —è–¥—Ä–∞ –ø–æ–ª—É—á–∞—é—Ç capabilities
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–∏ –¥–µ–∏–Ω—Å—Ç–∞–ª–ª—è—Ü–∏–∏

### 2. –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è
- –û–¥–∏–Ω —à–∞–≥ —Å–±–æ—Ä–∫–∏ (`makepkg -si`)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–∞—Å–ø–∞–∫–æ–≤–∫–∞ AppImage
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ capabilities
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

### 3. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- Desktop —Ñ–∞–π–ª –¥–ª—è –º–µ–Ω—é –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
- Wrapper —Å–∫—Ä–∏–ø—Ç –¥–ª—è —É–¥–æ–±–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞
- –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—É—Ç–µ–π (LD_LIBRARY_PATH, QT_PLUGIN_PATH)
- –°–∏–º–ª–∏–Ω–∫–∏ –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏

### 4. –û—Ç–ª–∞–¥–∫–∞
- –°–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∏
- –ü–æ–¥—Ä–æ–±–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –ø—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ
- –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–µ –ø—Ä–æ–±–ª–µ–º

### 5. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- 6 –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤
- –ü—Ä–∏–º–µ—Ä—ã –∫–æ–º–∞–Ω–¥ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏
- –†–µ—à–µ–Ω–∏–µ —Ç–∏–ø–æ–≤—ã—Ö –ø—Ä–æ–±–ª–µ–º
- –°—Å—ã–ª–∫–∏ –Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é Linux

---

## üéì –û–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è —Ü–µ–Ω–Ω–æ—Å—Ç—å

–ü—Ä–æ–µ–∫—Ç –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç:

1. **Packaging best practices** –¥–ª—è Arch Linux
2. **Linux capabilities** –≤–º–µ—Å—Ç–æ —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö SUID
3. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** —á–µ—Ä–µ–∑ –º–∏–Ω–∏–º–∏–∑–∞—Ü–∏—é –ø—Ä–∏–≤–∏–ª–µ–≥–∏–π
4. **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—é** —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
5. **–î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö —Ä–µ—à–µ–Ω–∏–π
6. **Git workflow** –¥–ª—è AUR –ø–∞–∫–µ—Ç–æ–≤

---

## üîÑ –î–∞–ª—å–Ω–µ–π—à–∏–µ —à–∞–≥–∏

### –õ–æ–∫–∞–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
- ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
- –ö–æ–º–∞–Ω–¥—ã –≤ `QUICKSTART.md`

### –ü—É–±–ª–∏–∫–∞—Ü–∏—è –≤ AUR
1. –ò–∑–º–µ–Ω–∏—Ç—å `source` –≤ PKGBUILD –Ω–∞ –ø—É–±–ª–∏—á–Ω—ã–π URL AppImage
2. –û–±–Ω–æ–≤–∏—Ç—å checksums: `updpkgsums`
3. –ü–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å .SRCINFO: `makepkg --printsrcinfo > .SRCINFO`
4. Push –≤ AUR: `git push aur master`

### –ü–æ–¥–¥–µ—Ä–∂–∫–∞
- –°–ª–µ–¥–∏—Ç—å –∑–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è–º–∏ Happ Desktop
- –û–±–Ω–æ–≤–ª—è—Ç—å `pkgver` –ø—Ä–∏ –Ω–æ–≤—ã—Ö —Ä–µ–ª–∏–∑–∞—Ö
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ —á–∏—Å—Ç–æ–π —Å–∏—Å—Ç–µ–º–µ

---

## üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞

- **GitHub**: https://github.com/mazixs/happ-desktop-aur
- **Issues**: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ GitHub Issues –¥–ª—è —Å–æ–æ–±—â–µ–Ω–∏—è –æ –ø—Ä–æ–±–ª–µ–º–∞—Ö
- **Pull Requests**: –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é—Ç—Å—è —É–ª—É—á—à–µ–Ω–∏—è

---

## üìù –õ–∏—Ü–µ–Ω–∑–∏–∏

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ø—Ä–æ–µ–∫—Ç–∞

- **PKGBUILD –∏ —Å–∫—Ä–∏–ø—Ç—ã**: Public Domain / MIT (–Ω–∞ —É—Å–º–æ—Ç—Ä–µ–Ω–∏–µ)
- **sing-box**: —Å–º. `/opt/happ/tun/LICENSE`
- **Xray**: —Å–º. `/opt/happ/core/LICENSE`
- **Happ Desktop**: –ª–∏—Ü–µ–Ω–∑–∏—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞

---

## ‚úÖ –§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞

- [x] AppImage —Ä–∞—Å–ø–∞–∫–æ–≤–∞–Ω
- [x] PKGBUILD —Å–æ–∑–¥–∞–Ω –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω
- [x] Capabilities –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- [x] .install —Å–∫—Ä–∏–ø—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç
- [x] –¢–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç –Ω–∞–ø–∏—Å–∞–Ω
- [x] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ–ª–Ω–∞—è (6 —Ñ–∞–π–ª–æ–≤)
- [x] .gitignore –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [x] .SRCINFO —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω
- [x] –ü—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

---

## üéâ –ò—Ç–æ–≥

**–ü—Ä–æ–µ–∫—Ç —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à—ë–Ω!**

–°–æ–∑–¥–∞–Ω –ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π AUR –ø–∞–∫–µ—Ç –¥–ª—è Happ Desktop —Å:
- ‚úÖ –ù–∞—Ç–∏–≤–Ω–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–æ–π
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–æ–π TUN –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ —á–µ—Ä–µ–∑ cap_net_admin
- ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–æ–π
- ‚úÖ –ü–æ–ª–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π

**–û—Å–Ω–æ–≤–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞ —Ä–µ—à–µ–Ω–∞**: –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ç–µ–ø–µ—Ä—å –º–æ–∂–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å TUN –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –±–µ–∑ sudo!

---

*–î–∞—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è*: 14 –Ω–æ—è–±—Ä—è 2024  
*–ê–≤—Ç–æ—Ä*: Mazix  
*–í–µ—Ä—Å–∏—è*: 1.0.0
